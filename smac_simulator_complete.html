<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Outil de simulation</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      color: #2c2c2c;
      background-color: #faf9f7;
    }

    header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 2rem 0 4rem;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
      opacity: 0.3;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      position: relative;
      z-index: 2;
    }

    .back-button {
      position: absolute;
      top: 0;
      left: 2rem;
      display: flex;
      align-items: center;
      text-decoration: none;
      color: white;
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.9;
      transition: all 0.3s ease;
      z-index: 10;
      background: rgba(255, 255, 255, 0.1);
      padding: 0.5rem 1rem;
      border-radius: 25px;
      backdrop-filter: blur(10px);
    }

    .back-button:hover {
      opacity: 1;
      background: rgba(255, 255, 255, 0.2);
      transform: translateX(-3px);
    }

    .back-button svg {
      margin-right: 0.5rem;
      width: 20px;
      height: 20px;
    }

    h1 {
      font-size: 3.5rem;
      margin-bottom: 1rem;
      font-weight: 300;
      letter-spacing: -0.02em;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .subtitle {
      font-size: 1.4rem;
      opacity: 0.95;
      margin-bottom: 1.5rem;
      font-weight: 400;
    }

    .project-badge {
      display: inline-block;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      padding: 0.5rem 1.5rem;
      border-radius: 30px;
      font-size: 0.9rem;
      font-weight: 500;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      margin-bottom: 2rem;
    }

    .description {
      font-size: 1.1rem;
      max-width: 900px;
      margin: 0 auto;
      opacity: 0.95;
      line-height: 1.8;
      font-weight: 300;
      text-align: center;
    }

    main {
      padding: 6rem 0;
    }

    .article-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
    }

    .content-section {
      margin-bottom: 5rem;
    }

    .section-title {
      font-size: 2.2rem;
      color: #2c2c2c;
      margin-bottom: 2rem;
      font-weight: 300;
      text-align: center;
      position: relative;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 3px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 2px;
    }

    .disclaimer-box {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 1.5rem;
      margin: 2rem 0;
      border-radius: 8px;
      font-size: 0.95rem;
      color: #856404;
    }

    .disclaimer-box strong {
      color: #664d03;
    }

    .simulator-container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
      padding: 3rem;
      margin: 3rem 0;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      font-size: 0.9rem;
      font-weight: 500;
      color: #2c2c2c;
      margin-bottom: 0.5rem;
    }

    .form-group select,
    .form-group input {
      padding: 0.8rem;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s ease;
    }

    .form-group select:focus,
    .form-group input:focus {
      outline: none;
      border-color: #667eea;
    }

    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .simulate-btn, .export-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 1rem 3rem;
      border: none;
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .export-btn {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      display: none;
    }

    .export-btn.show {
      display: inline-flex;
    }

    .simulate-btn:hover, .export-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }

    .alerts-container {
      margin: 2rem 0;
      display: none;
    }

    .alerts-container.show {
      display: block;
      animation: fadeInUp 0.6s ease-out;
    }

    .alert {
      padding: 1rem 1.5rem;
      margin: 0.5rem 0;
      border-radius: 12px;
      border-left: 4px solid;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      font-size: 0.95rem;
      font-weight: 500;
      animation: slideInLeft 0.5s ease-out;
    }

    .alert-success {
      background: #d4edda;
      border-color: #28a745;
      color: #155724;
    }

    .alert-warning {
      background: #fff3cd;
      border-color: #ffc107;
      color: #856404;
    }

    .alert-info {
      background: #d1ecf1;
      border-color: #17a2b8;
      color: #0c5460;
    }

    .alert-danger {
      background: #f8d7da;
      border-color: #dc3545;
      color: #721c24;
    }

    .results-container {
      margin-top: 3rem;
      display: none;
    }

    .results-container.show {
      display: block;
      animation: fadeInUp 0.6s ease-out;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 2rem;
      margin: 4rem 0;
    }

    .stat-card {
      background: white;
      padding: 2rem;
      border-radius: 16px;
      text-align: center;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .stat-card:hover {
      transform: translateY(-4px);
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .stat-card.positive::before {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
    }

    .stat-card.negative::before {
      background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);
    }

    .stat-card.warning::before {
      background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: 300;
      color: #667eea;
      display: block;
      margin-bottom: 0.5rem;
    }

    .stat-number.positive { color: #28a745; }
    .stat-number.negative { color: #dc3545; }
    .stat-number.warning { color: #ffc107; }

    .stat-label {
      font-size: 0.9rem;
      color: #6a6a6a;
      font-weight: 400;
    }

    .stat-sublabel {
      font-size: 0.8rem;
      color: #999;
      margin-top: 0.3rem;
    }

    .recommendations {
      background: #f8f9fa;
      border-radius: 16px;
      padding: 2rem;
      margin: 3rem 0;
      border-left: 4px solid #667eea;
    }

    .recommendations h3 {
      font-size: 1.3rem;
      color: #2c2c2c;
      margin-bottom: 1rem;
      font-weight: 500;
    }

    .recommendations ul {
      list-style: none;
      padding: 0;
    }

    .recommendations li {
      padding: 0.5rem 0;
      color: #4a4a4a;
      position: relative;
      padding-left: 1.5rem;
    }

    .recommendations li::before {
      content: '‚Üí';
      position: absolute;
      left: 0;
      color: #667eea;
      font-weight: bold;
    }

    .risk-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .risk-bar {
      width: 100px;
      height: 8px;
      background: #e0e0e0;
      border-radius: 4px;
      overflow: hidden;
      position: relative;
    }

    .risk-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    .risk-low { background: #4ade80; }
    .risk-medium { background: #fbbf24; }
    .risk-high { background: #f87171; }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @media (max-width: 768px) {
      header {
        padding: 2rem 0 3rem;
      }

      .back-button {
        position: static;
        margin-bottom: 2rem;
        justify-content: center;
      }

      h1 {
        font-size: 2.5rem;
      }

      .subtitle {
        font-size: 1.2rem;
      }

      .article-content {
        padding: 0 1.5rem;
      }

      .container {
        padding: 0 1.5rem;
      }

      .simulator-container {
        padding: 2rem;
      }

      .form-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }

      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
      }

      .action-buttons {
        flex-direction: column;
        align-items: center;
      }

      .simulate-btn, .export-btn {
        width: 100%;
        max-width: 300px;
      }
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 2rem;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <a href="index.html" class="back-button">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Retour au portfolio
      </a>
      
      <h1>Simulateur Programmation</h1>
      <p class="subtitle">Outil de simulation d'aide √† la programmation culturelle</p>
      <div class="project-badge">Data Analytics ‚Ä¢ Simulation ‚Ä¢ √âv√©nementiel</div>
      <p class="description">
        Un outil d'aide √† la d√©cision pour les programmateurs de Sc√®nes de Musiques Actuelles, 
        con√ßu pour enrichir l'expertise m√©tier avec des √©l√©ments d'analyse quantitative. 
        Adaptable aux sp√©cificit√©s locales et aux contraintes budg√©taires de chaque structure.
      </p>
    </div>
  </header>

  <main>
    <article class="article-content">
      
      <!-- Introduction contextuelle -->
      <section class="content-section">
        <div style="background: white; padding: 3rem; border-radius: 20px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08); margin-bottom: 3rem; text-align: center;">
          <h2 style="font-size: 1.8rem; color: #2c2c2c; margin-bottom: 2rem; font-weight: 400;">Un outil au service de l'expertise cr√©ative</h2>
          
          <div style="max-width: 900px; margin: 0 auto; text-align: left;">
            <p style="font-size: 1.1rem; line-height: 1.8; color: #4a4a4a; margin-bottom: 1.5rem;">
              Ce simulateur propose une approche compl√©mentaire √† l'expertise artistique des programmateurs SMAC. 
              En int√©grant des variables √©conomiques, temporelles et contextuelles, il offre un √©clairage quantitatif 
              pour enrichir les d√©cisions cr√©atives et artistiques.
            </p>
            
            <p style="font-size: 1.1rem; line-height: 1.8; color: #4a4a4a; margin-bottom: 1.5rem;">
              L'outil s'adapte aux r√©alit√©s sp√©cifiques de chaque structure : contraintes budg√©taires, 
              public local, partenariats institutionnels, et objectifs artistiques. Il ne remplace pas 
              l'intuition et la connaissance du terrain, mais la compl√®te avec des √©l√©ments d'analyse.
            </p>

            <div style="background: #f8f9ff; padding: 2rem; border-radius: 12px; border-left: 4px solid #667eea; margin: 2rem 0;">
              <p style="font-style: italic; color: #4a4a4a; margin: 0; font-size: 1rem; line-height: 1.7;">
                <strong>Exemple d'usage :</strong> Un programmateur souhaite √©valuer l'opportunit√© d'accueillir 
                un groupe de rock alternatif national un vendredi soir en mars. L'outil fournit une estimation 
                de fr√©quentation (75%), identifie le seuil de rentabilit√© (60%), pr√©cise le public cible (25-40 ans), 
                et sugg√®re une fourchette tarifaire adapt√©e (25-30‚Ç¨).
              </p>
            </div>

            <div class="disclaimer-box">
              <strong>Version d√©mo :</strong> Cet outil utilise des donn√©es simul√©es √† des fins d'illustration. 
              Les r√©sultats d√©pendent fortement de la strat√©gie de communication, du contexte local et de la concurrence - 
              variables non int√©gr√©es dans cette version d√©mo. En situation r√©elle, ces calculs s'appuieraient sur 
              des bases de donn√©es de fr√©quentation historiques et une analyse approfondie du territoire.
            </div>
          </div>
        </div>
      </section>

      <!-- Simulateur principal -->
      <section class="content-section">
        <h2 class="section-title">Simulateur de Concert</h2>
        
        <div class="simulator-container">
          <div class="form-grid">
            <div class="form-group">
              <label for="genre">Genre musical</label>
              <select id="genre">
                <option value="">S√©lectionnez un genre</option>
                <option value="rock">Rock</option>
                <option value="hip-hop">Hip-Hop</option>
                <option value="electro">√âlectro</option>
                <option value="jazz">Jazz</option>
                <option value="world">World Music</option>
                <option value="pop">Pop</option>
                <option value="metal">Metal</option>
                <option value="folk">Folk</option>
              </select>
            </div>

            <div class="form-group">
              <label for="notoriety">Notori√©t√© artiste</label>
              <select id="notoriety">
                <option value="">Niveau de notori√©t√©</option>
                <option value="local">Local</option>
                <option value="regional">R√©gional</option>
                <option value="national">National</option>
                <option value="international">International</option>
              </select>
            </div>

            <div class="form-group">
              <label for="capacity">Capacit√© de la salle</label>
              <select id="capacity">
                <option value="">Places disponibles</option>
                <option value="150">150 places</option>
                <option value="300">300 places</option>
                <option value="500">500 places</option>
                <option value="800">800 places</option>
              </select>
            </div>

            <div class="form-group">
              <label for="price">Prix du billet (‚Ç¨)</label>
              <input type="number" id="price" min="5" max="100" placeholder="ex: 25">
            </div>

            <div class="form-group">
              <label for="cachet">Cachet artiste (‚Ç¨)</label>
              <input type="number" id="cachet" min="0" placeholder="ex: 3000">
            </div>

            <div class="form-group">
              <label for="technique">Frais techniques (‚Ç¨)</label>
              <input type="number" id="technique" min="0" placeholder="ex: 1500">
            </div>

            <div class="form-group">
              <label for="communication">Budget communication (‚Ç¨)</label>
              <input type="number" id="communication" min="0" max="10000" placeholder="ex: 500">
            </div>

            <div class="form-group">
              <label for="day">Jour de la semaine</label>
              <select id="day">
                <option value="">Jour du concert</option>
                <option value="monday">Lundi</option>
                <option value="tuesday">Mardi</option>
                <option value="wednesday">Mercredi</option>
                <option value="thursday">Jeudi</option>
                <option value="friday">Vendredi</option>
                <option value="saturday">Samedi</option>
                <option value="sunday">Dimanche</option>
              </select>
            </div>

            <div class="form-group">
              <label for="season">Saison</label>
              <select id="season">
                <option value="">P√©riode de l'ann√©e</option>
                <option value="spring">Printemps</option>
                <option value="summer">√ât√©</option>
                <option value="autumn">Automne</option>
                <option value="winter">Hiver</option>
              </select>
            </div>
          </div>

          <div class="action-buttons">
            <button class="simulate-btn" onclick="runSimulation()">
              Lancer la simulation
            </button>
            <button class="export-btn" id="exportBtn" onclick="exportToPDF()">
              üìÑ T√©l√©charger le rapport
            </button>
          </div>

          <!-- Alertes intelligentes -->
          <div class="alerts-container" id="alerts">
          </div>

          <!-- R√©sultats -->
          <div class="results-container" id="results">
            <div class="stats-grid">
              <div class="stat-card">
                <span class="stat-number" id="attendance-rate">0%</span>
                <div class="stat-label">Taux de remplissage</div>
                <div class="stat-sublabel" id="attendance-number">0 personnes</div>
              </div>
              <div class="stat-card">
                <span class="stat-number" id="revenue">0‚Ç¨</span>
                <div class="stat-label">Revenus billetterie</div>
                <div class="stat-sublabel" id="revenue-detail">Brut</div>
              </div>
              <div class="stat-card" id="margin-card">
                <span class="stat-number" id="margin">0‚Ç¨</span>
                <div class="stat-label">Marge nette</div>
                <div class="stat-sublabel" id="margin-detail">Apr√®s co√ªts</div>
              </div>
              <div class="stat-card" id="benefit-card">
                <span class="stat-number" id="benefit">0‚Ç¨</span>
                <div class="stat-label">B√©n√©fice estim√©</div>
                <div class="stat-sublabel" id="benefit-detail">R√©sultat final</div>
              </div>
              <div class="stat-card">
                <span class="stat-number" id="risk-score">0/10</span>
                <div class="stat-label">Score de risque</div>
                <div class="risk-indicator">
                  <div class="risk-bar">
                    <div class="risk-fill" id="risk-fill"></div>
                  </div>
                </div>
              </div>
              <div class="stat-card">
                <span class="stat-number" id="break-even">0%</span>
                <div class="stat-label">Seuil de rentabilit√©</div>
                <div class="stat-sublabel" id="break-even-detail">Taux minimum</div>
              </div>
            </div>

            <div class="recommendations" id="recommendations">
              <h3>üéØ Recommandations strat√©giques</h3>
              <ul id="recommendations-list">
                <!-- Les recommandations seront g√©n√©r√©es ici -->
              </ul>
            </div>
          </div>
        </div>
      </section>
    </article>
  </main>

  <script>
    // Configuration des donn√©es de simulation
    const genreMultipliers = {
      'rock': 1.2,
      'hip-hop': 1.4,
      'electro': 1.3,
      'jazz': 0.8,
      'world': 0.9,
      'pop': 1.5,
      'metal': 1.1,
      'folk': 0.7
    };

    const notorietyMultipliers = {
      'local': 0.6,
      'regional': 0.8,
      'national': 1.2,
      'international': 1.8
    };

    const dayMultipliers = {
      'monday': 0.4,
      'tuesday': 0.5,
      'wednesday': 0.6,
      'thursday': 0.7,
      'friday': 1.3,
      'saturday': 1.5,
      'sunday': 0.8
    };

    const seasonMultipliers = {
      'spring': 1.1,
      'summer': 0.8,
      'autumn': 1.2,
      'winter': 1.0
    };

    function runSimulation() {
      // R√©cup√©ration des valeurs du formulaire
      const genre = document.getElementById('genre').value;
      const notoriety = document.getElementById('notoriety').value;
      const capacity = parseInt(document.getElementById('capacity').value);
      const price = parseFloat(document.getElementById('price').value);
      const cachet = parseFloat(document.getElementById('cachet').value) || 0;
      const technique = parseFloat(document.getElementById('technique').value) || 0;
      const communication = parseFloat(document.getElementById('communication').value) || 0;
      const day = document.getElementById('day').value;
      const season = document.getElementById('season').value;

      // Validation des champs obligatoires
      const alerts = [];
      if (!genre || !notoriety || !capacity || !price || !day || !season) {
        showAlert('danger', '‚ö†Ô∏è Veuillez remplir tous les champs obligatoires pour lancer la simulation.');
        return;
      }

      // Calcul du taux de fr√©quentation de base
      let baseAttendanceRate = 0.7; // 70% de base
      
      // Application des multiplicateurs
      baseAttendanceRate *= genreMultipliers[genre] || 1;
      baseAttendanceRate *= notorietyMultipliers[notoriety] || 1;
      baseAttendanceRate *= dayMultipliers[day] || 1;
      baseAttendanceRate *= seasonMultipliers[season] || 1;

      // Effet du budget communication
      const communicationEffect = Math.min(communication / 1000 * 0.1, 0.3); // Max +30%
      baseAttendanceRate += communicationEffect;

      // Effet prix (prix trop √©lev√© diminue la fr√©quentation)
      const expectedPrice = getExpectedPrice(genre, notoriety);
      if (price > expectedPrice * 1.2) {
        baseAttendanceRate *= 0.8; // -20% si prix trop √©lev√©
      }

      // Limiter entre 10% et 95%
      const attendanceRate = Math.max(0.1, Math.min(0.95, baseAttendanceRate));

      // Calculs financiers
      const attendees = Math.round(capacity * attendanceRate);
      const revenue = attendees * price;
      const totalCosts = cachet + technique + communication;
      const margin = revenue - totalCosts;
      const benefit = margin * 0.85; // 15% de frais g√©n√©raux

      // Calcul du seuil de rentabilit√©
      const breakEvenAttendees = Math.ceil(totalCosts / price);
      const breakEvenRate = Math.min(1, breakEvenAttendees / capacity);

      // Score de risque (1-10)
      let riskScore = 5; // Neutre
      if (attendanceRate < breakEvenRate) riskScore += 3;
      if (price > expectedPrice * 1.5) riskScore += 2;
      if (communication < 300) riskScore += 1;
      if (day === 'monday' || day === 'tuesday') riskScore += 1;
      if (attendanceRate > 0.8) riskScore -= 2;
      if (margin > totalCosts * 0.5) riskScore -= 1;
      riskScore = Math.max(1, Math.min(10, riskScore));

      // Affichage des r√©sultats
      displayResults(attendanceRate, attendees, revenue, margin, benefit, breakEvenRate, riskScore, alerts);
      
      // G√©n√©ration des alertes intelligentes
      generateAlerts(attendanceRate, breakEvenRate, price, expectedPrice, communication, day, alerts);
      
      // G√©n√©ration des recommandations
      generateRecommendations(attendanceRate, breakEvenRate, price, expectedPrice, genre, notoriety, day);
      
      // Affichage des alertes
      showAlerts(alerts);
    }

    function getExpectedPrice(genre, notoriety) {
      const basePrices = {
        'rock': 25,
        'hip-hop': 30,
        'electro': 28,
        'jazz': 22,
        'world': 20,
        'pop': 35,
        'metal': 27,
        'folk': 18
      };
      
      const notorietyMultipliers = {
        'local': 0.7,
        'regional': 0.9,
        'national': 1.3,
        'international': 2.0
      };
      
      return (basePrices[genre] || 25) * (notorietyMultipliers[notoriety] || 1);
    }

    function displayResults(attendanceRate, attendees, revenue, margin, benefit, breakEvenRate, riskScore, alerts) {
      // Mise √† jour des statistiques
      document.getElementById('attendance-rate').textContent = Math.round(attendanceRate * 100) + '%';
      document.getElementById('attendance-number').textContent = attendees + ' personnes';
      
      document.getElementById('revenue').textContent = revenue.toLocaleString('fr-FR') + '‚Ç¨';
      document.getElementById('revenue-detail').textContent = 'Brut';
      
      document.getElementById('margin').textContent = margin.toLocaleString('fr-FR') + '‚Ç¨';
      document.getElementById('margin-detail').textContent = 'Apr√®s co√ªts';
      
      document.getElementById('benefit').textContent = benefit.toLocaleString('fr-FR') + '‚Ç¨';
      document.getElementById('benefit-detail').textContent = 'R√©sultat final';
      
      document.getElementById('risk-score').textContent = riskScore + '/10';
      
      document.getElementById('break-even').textContent = Math.round(breakEvenRate * 100) + '%';
      document.getElementById('break-even-detail').textContent = 'Taux minimum';

      // Coloration des cartes selon les r√©sultats
      const marginCard = document.getElementById('margin-card');
      const benefitCard = document.getElementById('benefit-card');
      
      if (margin > 0) {
        marginCard.className = 'stat-card positive';
        document.getElementById('margin').className = 'stat-number positive';
      } else {
        marginCard.className = 'stat-card negative';
        document.getElementById('margin').className = 'stat-number negative';
      }
      
      if (benefit > 0) {
        benefitCard.className = 'stat-card positive';
        document.getElementById('benefit').className = 'stat-number positive';
      } else {
        benefitCard.className = 'stat-card negative';
        document.getElementById('benefit').className = 'stat-number negative';
      }

      // Barre de risque
      const riskFill = document.getElementById('risk-fill');
      const riskPercentage = (riskScore / 10) * 100;
      riskFill.style.width = riskPercentage + '%';
      
      if (riskScore <= 3) {
        riskFill.className = 'risk-fill risk-low';
      } else if (riskScore <= 6) {
        riskFill.className = 'risk-fill risk-medium';
      } else {
        riskFill.className = 'risk-fill risk-high';
      }

      // Affichage des r√©sultats
      document.getElementById('results').classList.add('show');
      document.getElementById('exportBtn').classList.add('show');
    }

    function generateAlerts(attendanceRate, breakEvenRate, price, expectedPrice, communication, day, alerts) {
      // Alerte rentabilit√©
      if (attendanceRate < breakEvenRate) {
        alerts.push({
          type: 'danger',
          message: `üö® Risque de d√©ficit : Le taux de fr√©quentation estim√© (${Math.round(attendanceRate * 100)}%) est inf√©rieur au seuil de rentabilit√© (${Math.round(breakEvenRate * 100)}%).`
        });
      } else if (attendanceRate > breakEvenRate * 1.5) {
        alerts.push({
          type: 'success',
          message: `‚úÖ Excellent potentiel : Le taux de fr√©quentation estim√© d√©passe largement le seuil de rentabilit√©.`
        });
      }

      // Alerte prix
      if (price > expectedPrice * 1.3) {
        alerts.push({
          type: 'warning',
          message: `üí∞ Prix √©lev√© : Le tarif propos√© (${price}‚Ç¨) est sup√©rieur aux standards du march√© (${Math.round(expectedPrice)}‚Ç¨). Cela peut impacter la fr√©quentation.`
        });
      } else if (price < expectedPrice * 0.7) {
        alerts.push({
          type: 'info',
          message: `üí° Opportunit√© tarifaire : Le prix pourrait √™tre augment√© pour optimiser les revenus sans impacter significativement la fr√©quentation.`
        });
      }

      // Alerte communication
      if (communication < 300) {
        alerts.push({
          type: 'warning',
          message: `üì¢ Budget communication faible : Un budget plus √©lev√© pourrait am√©liorer significativement la fr√©quentation.`
        });
      }

      // Alerte jour
      if (day === 'monday' || day === 'tuesday') {
        alerts.push({
          type: 'info',
          message: `üìÖ Jour √† faible affluence : Pr√©voir des actions sp√©cifiques pour dynamiser la fr√©quentation en d√©but de semaine.`
        });
      }
    }

    function generateRecommendations(attendanceRate, breakEvenRate, price, expectedPrice, genre, notoriety, day) {
      const recommendations = [];
      
      // Recommandations bas√©es sur la rentabilit√©
      if (attendanceRate < breakEvenRate) {
        recommendations.push("Envisager une r√©duction du cachet artistique ou n√©gocier un pourcentage sur les ventes");
        recommendations.push("Augmenter significativement le budget communication pour am√©liorer la visibilit√©");
        recommendations.push("Proposer des tarifs pr√©f√©rentiels ou des offres group√©es pour stimuler les ventes");
      }
      
      // Recommandations tarifaires
      if (price > expectedPrice * 1.2) {
        recommendations.push("Consid√©rer une baisse de prix pour am√©liorer l'accessibilit√© et la fr√©quentation");
      } else if (price < expectedPrice * 0.8) {
        recommendations.push("Opportunit√© d'augmenter l√©g√®rement le prix sans impacter la demande");
      }
      
      // Recommandations par genre
      const genreRecommendations = {
        'hip-hop': "Privil√©gier les r√©seaux sociaux et les influenceurs pour la communication",
        'jazz': "Cibler un public mature via la presse sp√©cialis√©e et les partenariats culturels",
        'electro': "Mise en avant de l'aspect technique et sonore, communication digitale",
        'rock': "Communication transg√©n√©rationnelle, partenariats avec les m√©dias locaux",
        'pop': "Large communication grand public, partenariats commerciaux",
        'metal': "Communication cibl√©e communautaire, merchandising",
        'folk': "Ambiance intimiste, communication culturelle et patrimoniale",
        'world': "Partenariats avec les communaut√©s, communication interculturelle"
      };
      
      if (genreRecommendations[genre]) {
        recommendations.push(genreRecommendations[genre]);
      }
      
      // Recommandations par jour
      if (day === 'friday' || day === 'saturday') {
        recommendations.push("Profiter de la forte affluence du week-end pour maximiser les revenus annexes (bar, merchandising)");
      } else if (day === 'sunday') {
        recommendations.push("Proposer une programmation familiale ou des horaires adapt√©s (concert plus t√¥t)");
      } else {
        recommendations.push("Compenser la faible affluence en semaine par des tarifs attractifs ou des offres sp√©ciales");
      }
      
      // Affichage des recommandations
      const recommendationsList = document.getElementById('recommendations-list');
      recommendationsList.innerHTML = '';
      recommendations.forEach(rec => {
        const li = document.createElement('li');
        li.textContent = rec;
        recommendationsList.appendChild(li);
      });
    }

    function showAlert(type, message) {
      showAlerts([{type, message}]);
    }

    function showAlerts(alerts) {
      const alertsContainer = document.getElementById('alerts');
      alertsContainer.innerHTML = '';
      
      if (alerts.length > 0) {
        alerts.forEach(alert => {
          const alertDiv = document.createElement('div');
          alertDiv.className = `alert alert-${alert.type}`;
          alertDiv.innerHTML = `<span>${alert.message}</span>`;
          alertsContainer.appendChild(alertDiv);
        });
        alertsContainer.classList.add('show');
      } else {
        alertsContainer.classList.remove('show');
      }
    }

    function exportToPDF() {
      // Simulation de l'export PDF
      const genre = document.getElementById('genre').options[document.getElementById('genre').selectedIndex].text;
      const notoriety = document.getElementById('notoriety').options[document.getElementById('notoriety').selectedIndex].text;
      const capacity = document.getElementById('capacity').value;
      const price = document.getElementById('price').value;
      const day = document.getElementById('day').options[document.getElementById('day').selectedIndex].text;
      const season = document.getElementById('season').options[document.getElementById('season').selectedIndex].text;
      
      const attendanceRate = document.getElementById('attendance-rate').textContent;
      const revenue = document.getElementById('revenue').textContent;
      const margin = document.getElementById('margin').textContent;
      const benefit = document.getElementById('benefit').textContent;
      const riskScore = document.getElementById('risk-score').textContent;
      const breakEven = document.getElementById('break-even').textContent;
      
      // Cr√©ation du contenu du rapport
      const reportContent = `
RAPPORT DE SIMULATION SMAC
========================

PARAM√àTRES DE SIMULATION :
- Genre : ${genre}
- Notori√©t√© : ${notoriety}  
- Capacit√© : ${capacity} places
- Prix : ${price}‚Ç¨
- Jour : ${day}
- Saison : ${season}

R√âSULTATS :
- Taux de remplissage estim√© : ${attendanceRate}
- Revenus billetterie : ${revenue}
- Marge nette : ${margin}
- B√©n√©fice estim√© : ${benefit}
- Seuil de rentabilit√© : ${breakEven}
- Score de risque : ${riskScore}

RECOMMANDATIONS :
${Array.from(document.getElementById('recommendations-list').children).map(li => '- ' + li.textContent).join('\n')}

Date de g√©n√©ration : ${new Date().toLocaleDateString('fr-FR')}
      `;
      
      // Cr√©er et t√©l√©charger le fichier
      const blob = new Blob([reportContent], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `rapport_simulation_smac_${new Date().toISOString().slice(0, 10)}.txt`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      // Notification
      showAlert('success', 'üìÑ Rapport t√©l√©charg√© avec succ√®s !');
    }

    // Initialisation
    document.addEventListener('DOMContentLoaded', function() {
      // Pr√©-remplissage pour d√©monstration
      setTimeout(() => {
        document.getElementById('genre').value = 'rock';
        document.getElementById('notoriety').value = 'national';
        document.getElementById('capacity').value = '300';
        document.getElementById('price').value = '25';
        document.getElementById('cachet').value = '3000';
        document.getElementById('technique').value = '1500';
        document.getElementById('communication').value = '500';
        document.getElementById('day').value = 'friday';
        document.getElementById('season').value = 'spring';
      }, 1000);
    });
  </script>
</body>
</html>